<!DOCTYPE html>
<html>
    <head>
    </head>
    <body>
        <div class="orientation">
            <h2>Device Orientation</h2>
            <table>
                <tr>
                    <td>Event Supported</td>
                    <td id="doEvent"></td>
                </tr>
                <tr>
                    <td>Tilt Left/Right [gamma]</td>
                    <td id="doTiltLR"></td>
                </tr>
                <tr>
                    <td>Tilt Front/Back [beta]</td>
                    <td id="doTiltFB"></td>
                </tr>
                <tr>
                    <td>Direction [alpha]</td>
                    <td id="doDirection"></td>
                </tr>
            </table>
        </div>

        <div class="motion">
            <h2>Device Motion</h2>
            <table>
                <tr>
                    <td>Event Supported</td>
                    <td id="dmEvent"></td>
                </tr>
                <tr>
                    <td>acceleration</td>
                    <td id="moAccel"></td>
                </tr>
                <tr>
                    <td>accelerationIncludingGravity</td>
                    <td id="moAccelGrav"></td>
                </tr>
                <tr>
                    <td>rotationRate</td>
                    <td id="moRotation"></td>
                </tr>
                <tr>
                    <td>interval</td>
                    <td id="moInterval"></td>
                </tr>
            </table>
        </div>

        <script>

            if (window.DeviceMotionEvent) {
                window.addEventListener('devicemotion', deviceMotionHandler, false);
            } else {
                document.getElementById("dmEvent").innerHTML = "Not supported."
            }

            if (window.DeviceOrientationEvent) {
                document.getElementById("doEvent").innerHTML = "true";
                // Listen for the deviceorientation event and handle the raw data
                window.addEventListener('deviceorientation', function(eventData) {
                    // gamma is the left-to-right tilt in degrees, where right is positive
                    var tiltLR = eventData.gamma;

                    // beta is the front-to-back tilt in degrees, where front is positive
                    var tiltFB = eventData.beta;

                    // alpha is the compass direction the device is facing in degrees
                    var dir = eventData.alpha;

                    // call our orientation event handler
                    deviceOrientationHandler(tiltLR, tiltFB, dir);
                }, false);
            } else {
                document.getElementById("doEvent").innerHTML = "Not supported."
            }



            function deviceOrientationHandler(tiltLR, tiltFB, dir) {
                document.getElementById("doTiltLR").innerHTML = toInteger(tiltLR);
                document.getElementById("doTiltFB").innerHTML = toInteger(tiltFB);
                document.getElementById("doDirection").innerHTML = toInteger(dir);
            }


            function toInteger(num) {
                return parseFloat(num).toFixed(0);
            }

            function deviceMotionHandler(eventData) {
                var info, xyz = "[X, Y, Z]";

                // Grab the acceleration from the results
                var acceleration = eventData.acceleration;
                info = xyz.replace("X", toInteger(acceleration.x));
                info = info.replace("Y", toInteger(acceleration.y));
                info = info.replace("Z", toInteger(acceleration.z));
                document.getElementById("moAccel").innerHTML = info;

                // Grab the acceleration including gravity from the results
                acceleration = eventData.accelerationIncludingGravity;
                info = xyz.replace("X", toInteger(acceleration.x));
                info = info.replace("Y", toInteger(acceleration.y));
                info = info.replace("Z", toInteger(acceleration.z));
                document.getElementById("moAccelGrav").innerHTML = info;

                // Grab the rotation rate from the results
                var rotation = eventData.rotationRate;
                info = xyz.replace("X", toInteger(acceleration.x));
                info = info.replace("Y", toInteger(acceleration.y));
                info = info.replace("Z", toInteger(acceleration.z));
                document.getElementById("moRotation").innerHTML = info;

                // // Grab the refresh interval from the results
                info = eventData.interval;
                document.getElementById("moInterval").innerHTML = info;
            }

        </script>

    </body>
</html>